<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ACHADOS HOUSE - Acess√≥rios lindos e √∫teis para sua casa</title>
    <link href="style.css" rel="stylesheet" />
    <style>
      /* seu CSS (mantive o estilo que voc√™ enviou) */
      @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');
      *{box-sizing:border-box;margin:0;padding:0}
      body{font-family:"Montserrat",sans-serif;background-color:#FEEFF4;color:#0E0D0D;line-height:1.6}
      .container{max-width:1200px;margin:0 auto;padding:0 20px}
      header{background:rgba(254,239,244,0.95);position:fixed;top:0;width:100%;z-index:1000}
      nav{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;max-width:1200px;margin:0 auto}
      .logo{display:flex;align-items:center;gap:10px;font-weight:700;font-size:1.5rem;color:#0E0D0D}
      .logo-icon{width:40px;height:40px;background:#898184;border-radius:8px;display:flex;margin:20px;align-items:center;justify-content:center;color:white;font-weight:bold}
      .nav-links{display:flex;gap:30px;list-style:none}
      .nav-links a{text-decoration:none;color:#0E0D0D;font-weight:500;transition:color .3s}
      .nav-links a:hover{color:#898184}
      .mobile-menu{display:none;flex-direction:column;cursor:pointer}
      .mobile-menu span{width:25px;height:3px;background:#0E0D0D;margin:3px 0;transition:.3s}
      main{margin-top:80px}
      .page{display:none;min-height:calc(100vh - 80px)}
      .page.active{display:block}
      .hero{text-align:center;padding:80px 0;background:linear-gradient(135deg,#FEEFF4 0%,rgba(137,129,132,0.05) 100%)}
      .hero h1{font-size:3rem;font-weight:700;margin-bottom:20px;line-height:1.2}
      .hero p{font-size:1.2rem;color:#898184;margin-bottom:40px;max-width:600px;margin-left:auto;margin-right:auto}
      .cta-button{background:#774671;color:white;padding:15px 40px;border:none;border-radius:50px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;display:inline-block}
      .cta-button:hover{background:#532d48;transform:translateY(-2px)}
      .featured{padding:80px 0}
      .section-title{text-align:center;font-size:2.5rem;font-weight:700;margin-bottom:50px}
      .products-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:30px;margin-bottom:40px}
      .product-card{background:white;border-radius:20px;padding:25px;box-shadow:0 10px 30px rgba(137,129,132,0.1);transition:all .3s;text-align:center;position:relative}
      .product-card:hover{transform:translateY(-5px);box-shadow:0 20px 40px rgba(137,129,132,0.15)}
      .product-image{width:100%;height:200px;background:#f8f8f8;border-radius:15px;margin-bottom:20px;display:flex;align-items:center;justify-content:center;font-size:3rem;overflow:hidden}
      .product-image img{width:100%;height:100%;object-fit:cover;display:block}
      .product-name{font-size:1.2rem;font-weight:600;margin-bottom:10px}
      .product-price{font-size:1.4rem;font-weight:700;color:#898184;margin-bottom:20px}
      .shopee-button{background:#ee4d2d;color:white;padding:12px 25px;border:none;border-radius:25px;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;display:inline-block;width:100%}
      .shopee-button:hover{background:#d73211;transform:translateY(-1px)}
      .catalog{padding:40px 0}
      .filters{display:flex;justify-content:center;gap:20px;margin-bottom:50px;flex-wrap:wrap}
      .filter-btn{background:white;border:2px solid #898184;color:#898184;padding:12px 25px;border-radius:25px;cursor:pointer;transition:all .3s;font-weight:500}
      .filter-btn.active,.filter-btn:hover{background:#898184;color:white}
      .catalog-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:25px}
      .product-tag{background:#898184;color:white;padding:5px 12px;border-radius:15px;font-size:.8rem;font-weight:500;position:absolute;top:15px;right:15px}
      .about{padding:80px 0;text-align:center}
      .about-content{max-width:800px;margin:0 auto}
      .tiktok-link{background:#000;color:white;padding:15px 30px;border-radius:25px;text-decoration:none;font-weight:600;display:inline-block;transition:all .3s}
      .tiktok-link:hover{background:#333;transform:translateY(-2px)}
      footer{background:#0E0D0D;color:white;padding:50px 0 30px;margin-top:80px}
      .affiliate-notice{text-align:center;color:#898184;font-size:.9rem}
      .trust-text{text-align:center;margin-top:20px;color:#898184;font-size:.9rem}
      @media (max-width:768px){.nav-links{display:none}.mobile-menu{display:flex}.hero h1{font-size:2rem}.hero p{font-size:1rem}.products-grid{grid-template-columns:1fr}.filters{gap:10px}.filter-btn{padding:10px 20px;font-size:.9rem}.catalog-grid{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}}
      .loading{display:inline-block;width:20px;height:20px;border:3px solid #f3f3f3;border-top:3px solid #898184;border-radius:50%;animation:spin 1s linear infinite}
      @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    </style>
  </head>
  <body>
    <header>
      <nav>
        <div class="logo">
          <div class="logo-icon">
            <a href="/index.html"><img src="./assets/logo ah.png" width="100px" height="auto" /></a>
          </div>
        </div>
        <ul class="nav-links">
          <li><a href="#" onclick="showPage('home')">Home</a></li>
          <li><a href="#" onclick="showPage('catalog')">Cat√°logo</a></li>
          <li><a href="#" onclick="showPage('about')">Sobre</a></li>
        </ul>
        <div class="mobile-menu">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </nav>
    </header>

    <main>
      <!-- HOME PAGE -->
      <div id="home" class="page active">
        <section class="hero">
          <div class="container">
            <h1>Acess√≥rios lindos e √∫teis para sua casa ‚ú®</h1>
            <p>Transforme seu lar com produtos selecionados especialmente para voc√™</p>
            <button class="cta-button" onclick="showPage('catalog')">Ver todos os produtos</button>
          </div>
        </section>

        <section class="featured">
          <div class="container">
            <h2 class="section-title">Mais clicados da semana</h2>
            <div class="products-grid" id="featured-products">
              <!-- ser√° sobrescrito pelo JS com os 3 primeiros produtos (quando carregados) -->
              <div style="width:100%;text-align:center" id="featured-loading"><div class="loading"></div></div>
            </div>
            <div class="trust-text">Link de afiliado ‚Äî compra segura na Shopee.</div>
          </div>
        </section>
      </div>

      <!-- CATALOG PAGE -->
      <div id="catalog" class="page">
        <section class="catalog">
          <div class="container">
            <h2 class="section-title">Cat√°logo Completo</h2>

            <div class="filters">
              <button class="filter-btn active" onclick="filterProducts('all', event)">Todos</button>
              <button class="filter-btn" onclick="filterProducts('cozinha', event)">Cozinha üç≥</button>
              <button class="filter-btn" onclick="filterProducts('quarto', event)">Quarto üõèÔ∏è</button>
              <button class="filter-btn" onclick="filterProducts('sala', event)">Sala üõãÔ∏è</button>
              <button class="filter-btn" onclick="filterProducts('banheiro', event)">Banheiro üöø</button>
            </div>

            <div class="catalog-grid" id="catalog-products">
              <div style="width:100%;text-align:center" id="catalog-loading"><div class="loading"></div></div>
            </div>

            <div class="trust-text">Link de afiliado ‚Äî compra segura na Shopee.</div>
          </div>
        </section>
      </div>

      <!-- ABOUT PAGE -->
      <div id="about" class="page">
        <section class="about">
          <div class="container">
            <div class="about-content">
              <h2>Sobre n√≥s</h2>
              <p>Selecionamos os melhores produtos para deixar sua casa mais bonita e pr√°tica. Curadoria feita com carinho para voc√™ ‚ú®</p>
              <p>Nossa miss√£o √© encontrar aqueles acess√≥rios especiais que fazem toda a diferen√ßa no seu lar, sempre pensando na qualidade e no melhor custo-benef√≠cio.</p>
              <a href="https://tiktok.com/@achados.housee" target="_blank" rel="noopener noreferrer" class="tiktok-link">Siga no TikTok</a>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer>
      <div class="affiliate-notice">Usamos links de afiliado. ¬© 2024 ACHADOS HOUSE - Todos os direitos reservados.</div>
    </footer>

    <script>
      // fallback local products (usados se /api/products falhar)
      const defaultProducts = [
        { id: 1, name: "Espelho Oval de Parede Com Led", price: "R$ 99,90", category: "cozinha", image: "", tag: "Mais vendido", url: "https://s.shopee.com.br/2B5oQoJyeQ" },
        { id: 2, name: "Kit 100 Placas 3D PVC", price: "R$ 34,50", category: "quarto", image: "", tag: "Novidade", url: "https://s.shopee.com.br/2g2523nWWO" },
        { id: 3, name: "Kit Marmita 10 Potes BPA FREE", price: "R$ 38,99", category: "quarto", image: "", tag: "Promo√ß√£o", url: "https://s.shopee.com.br/8KgRmhdxmz" }
      ];

      // produtos carregados (vindo da API ou fallback)
      let products = [];

      // utility: fetch with timeout
      function fetchWithTimeout(url, options = {}, timeout = 5000) {
        return Promise.race([
          fetch(url, options),
          new Promise((_, reject) => setTimeout(() => reject(new Error('timeout')), timeout))
        ]);
      }

      // fetch products from API (/api/products). If fails, use defaultProducts
      async function fetchProducts() {
        const catalogLoading = document.getElementById('catalog-loading');
        const featuredLoading = document.getElementById('featured-loading');
        if (catalogLoading) catalogLoading.style.display = 'block';
        if (featuredLoading) featuredLoading.style.display = 'block';

        try {
          // tenta buscar na mesma origem: /api/products
          const res = await fetchWithTimeout('/api/products', {}, 5000);
          if (!res.ok) throw new Error('Resposta n√£o OK');
          const data = await res.json();
          if (Array.isArray(data) && data.length) {
            products = data;
          } else {
            products = defaultProducts.slice();
          }
        } catch (err) {
          // fallback
          console.warn('Falha ao buscar /api/products, usando fallback local:', err);
          products = defaultProducts.slice();
        } finally {
          if (catalogLoading) catalogLoading.style.display = 'none';
          if (featuredLoading) featuredLoading.style.display = 'none';
        }
      }

      // show/hide pages
      function showPage(pageId) {
        document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        if (pageId === 'catalog') loadCatalogProducts();
        window.scrollTo(0, 0);
      }

      // filter products (fixed to use event param)
      function filterProducts(category, evt) {
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        if (evt && evt.currentTarget) evt.currentTarget.classList.add('active');
        const filtered = category === 'all' ? products : products.filter(p => p.category === category);
        displayProducts(filtered, 'catalog-products');
      }

      // render products (DOM-safe, sem innerHTML perigoso)
      function displayProducts(productsArray, containerId) {
        const container = document.getElementById(containerId);
        container.innerHTML = '';
        if (!productsArray || productsArray.length === 0) {
          const empty = document.createElement('div');
          empty.style.textAlign = 'center';
          empty.style.padding = '40px';
          empty.textContent = 'Nenhum produto encontrado.';
          container.appendChild(empty);
          return;
        }

        productsArray.forEach(product => {
          const card = document.createElement('div');
          card.className = 'product-card';

          // tag
          if (product.tag) {
            const tag = document.createElement('div');
            tag.className = 'product-tag';
            tag.textContent = product.tag;
            card.appendChild(tag);
          }

          // image area
          const imgWrap = document.createElement('div');
          imgWrap.className = 'product-image';
          if (product.image && (product.image.startsWith('http') || product.image.startsWith('/') || product.image.startsWith('./'))) {
            const img = document.createElement('img');
            img.src = product.image;
            img.alt = product.name || 'Produto';
            img.loading = 'lazy';
            imgWrap.appendChild(img);
          } else {
            // emoji or fallback text
            imgWrap.textContent = product.image || '';
          }
          card.appendChild(imgWrap);

          // name
          const h3 = document.createElement('h3');
          h3.className = 'product-name';
          h3.textContent = product.name || '';
          card.appendChild(h3);

          // price
          const pPrice = document.createElement('p');
          pPrice.className = 'product-price';
          pPrice.textContent = product.price || '';
          card.appendChild(pPrice);

          // button / link
          const a = document.createElement('a');
          a.className = 'shopee-button';
          a.textContent = 'Ver na Shopee';
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          a.href = product.url || '#';
          card.appendChild(a);

          container.appendChild(card);
        });
      }

      // load catalog (garante que products foi buscado)
      async function loadCatalogProducts() {
        if (!products || products.length === 0) {
          await fetchProducts();
        }
        displayProducts(products, 'catalog-products');
      }

      // mobile menu
      document.querySelector('.mobile-menu').addEventListener('click', function () {
        const navLinks = document.querySelector('.nav-links');
        navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
      });

      // init
      document.addEventListener('DOMContentLoaded', async function () {
        await fetchProducts();
        // mostra os 3 primeiros no featured
        displayProducts(products.slice(0, 3), 'featured-products');
        // garante cat√°logo pronto caso usu√°rio abra direto
        if (document.getElementById('catalog').classList.contains('active')) {
          displayProducts(products, 'catalog-products');
        }
      });
    </script>
  </body>
</html>
